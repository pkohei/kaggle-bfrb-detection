# Gemini CLI トラブルシューティング

## よくある問題と解決方法

### Gemini分析が期待と異なる場合

#### 問題: 分析結果が浅い・不完全
**解決方法:**
1. 指示内容の見直し（[テンプレート](gemini-templates.md)活用）
2. より具体的な分析観点の追加
3. プロジェクト背景情報の補強
4. 期待する出力形式をより詳細に指定

#### 問題: 前回の分析と一貫性がない
**原因:** Geminiは会話記憶を保持しない
**解決方法:**
1. 前回の分析結果を指示に含める
2. 一貫した背景情報を毎回提供
3. 比較対象を明確に指定

### 分析結果の活用が困難な場合

#### 問題: 改善提案が具体性に欠ける
**解決方法:**
1. 「具体的な実装手順を含めてください」を指示に追加
2. 「優先度付きで提案してください」を明記
3. 「既存コードとの関連性を説明してください」を要求

#### 問題: 改善項目が多すぎて実装困難
**解決方法:**
1. 優先度による段階的実装
2. 小さな改善から開始
3. 「高優先度3項目のみ」などの制約を指示に追加

### Gemini CLI実行エラー

#### 問題: コマンド実行が不完全
**解決方法:**
1. `gemini --yolo -p "指示内容"` で全コマンド実行を許可
2. より安全なコマンドのみを含む指示に変更
3. 分析のみに限定し、実行は別途手動で行う

#### 問題: レスポンスが途中で切れる
**解決方法:**
1. 指示を小分けして複数回実行
2. 「簡潔にまとめてください」を追加
3. 分析観点を絞り込む

## 指示改善のための診断

### チェックリスト

**基本構成:**
- [ ] プロジェクト背景を含んでいる
- [ ] 具体的な分析観点を指定している
- [ ] 期待する出力形式を明記している
- [ ] 「作業はしないでください」制約を含んでいる

**自己完結性:**
- [ ] 前回のやり取りに依存していない
- [ ] 必要な文脈がすべて含まれている
- [ ] 暗黙の前提がない

**明確性:**
- [ ] 曖昧な表現がない
- [ ] 専門用語の説明がある
- [ ] 期待する詳細レベルを指定している

## エスカレーション

### Geminiで解決困難な場合

以下の場合は、他のツールの使用を検討してください：

1. **単純な情報検索** → Task/Grep/Globツール
2. **特定ファイルの詳細分析** → Read + 直接分析
3. **定型的な作業** → 従来の開発ツール

### 参考資料

- [Gemini CLI公式ドキュメント](https://github.com/google-gemini/gemini-cli/blob/main/docs/index.md)
- [指示構成テンプレート](gemini-templates.md)
- [ツール選択ガイドライン](gemini-tool-selection.md)
